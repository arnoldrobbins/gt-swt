      INTEGER OPEN,MAPFD,ISATTY,GFNARG,MKTEMP,GETLIN
      INTEGER * 4 LAST
      INTEGER FD,FUNIT
      INTEGER PATH(180),LNECNT,ISTEMP
      INTEGER I,J,LNE(102),STATE(4)
      INTEGER * 4 SZE
      LOGICAL PRINT0,PRINU0
      INTEGER A$BUF(200)
      INTEGER USAGE(65)
      INTEGER PARSCL
      INTEGER AAAAA0(24)
      INTEGER AAAAB0(5)
      INTEGER AAAAC0(17)
      INTEGER AAAAD0(4)
      INTEGER AAAAE0(12)
      INTEGER AAAAF0(3)
      DATA USAGE/213,243,225,231,229,186,160,236,225,243,244,160,219,173
     *,244,160,221,160,219,160,173,227,221,160,219,173,236,188,163,190,2
     *21,160,219,173,246,221,160,219,173,238,188,163,190,160,252,160,173
     *,238,160,252,160,251,188,240,225,244,232,238,225,237,229,190,253,2
     *21,0/
      DATA AAAAA0/236,188,242,233,190,246,188,230,190,244,188,230,190,22
     *7,188,230,190,238,188,233,231,238,190,0/
      DATA AAAAB0/170,243,186,160,0/
      DATA AAAAC0/229,242,242,239,242,160,233,238,160,162,236,225,243,24
     *4,162,174,0/
      DATA AAAAD0/170,182,236,0/
      DATA AAAAE0/160,236,233,238,229,243,160,252,160,170,243,0/
      DATA AAAAF0/170,238,0/
      IF((A$BUF(236-225+1).EQ.2))GOTO 10000
        A$BUF(236-225+27)=20
10000 IF((PARSCL(AAAAA0,A$BUF).NE.-3))GOTO 10001
        CALL ERROR(USAGE)
10001 IF((A$BUF(236-225+1).EQ.0))GOTO 10002
        LNECNT=A$BUF(236-225+27)
        GOTO 10003
10002   LNECNT=20
10003 PRINU0=(A$BUF(227-225+1).NE.0)
      PRINT0=((.NOT.(A$BUF(227-225+1).NE.0)).OR.(A$BUF(244-225+1).NE.0))
      STATE(1)=1
10004   ISTEMP=0
        IF((GFNARG(PATH,STATE).NE.-1))GOTO 10005
          CALL SWT
10005     FD=OPEN(PATH,1)
          IF((FD.NE.-3))GOTO 10006
            CALL CANT(PATH)
10006   CONTINUE
        IF((ISATTY(FD).NE.1))GOTO 10007
          J=MKTEMP(3)
          CALL FCOPY(FD,J)
          FD=J
          ISTEMP=1
10007   CALL REWIND(FD)
        CALL FLUSH$(FD)
        FUNIT=MAPFD(FD)
        IF((FUNIT.NE.-3))GOTO 10008
          CALL ERROR('error in mapfd.')
10008   SZE=LAST(FUNIT,LNECNT)
        IF((SZE.GE.0))GOTO 10009
          CALL PRINT(-15,AAAAB0,PATH)
          CALL ERROR(AAAAC0)
10009   IF((.NOT.PRINU0))GOTO 10010
          CALL PRINT(-11,AAAAD0,SZE)
          IF((A$BUF(246-225+1).EQ.0))GOTO 10011
            CALL PRINT(-11,AAAAE0,PATH)
10011     CALL PRINT(-11,AAAAF0)
10010   IF(((A$BUF(246-225+1).EQ.0).OR.PRINU0))GOTO 10012
          CALL PRINT(-11,' *s*n.',PATH)
10012   IF((.NOT.PRINT0))GOTO 10013
          IF((LNECNT.LE.0))GOTO 10014
            CALL FCOPY(FD,-11)
            GOTO 10015
10014       CALL REWIND(FD)
            J=1
            GOTO 10018
10016       J=J+(1)
10018       IF((J.GT.-LNECNT))GOTO 10017
              IF((GETLIN(LNE,FD,102).NE.-1))GOTO 10019
                GOTO 10017
10019         CALL PUTLIN(LNE,-11)
            GOTO 10016
10017     CONTINUE
10015   CONTINUE
10013   IF((ISTEMP.NE.1))GOTO 10020
          CALL RMTEMP(FD)
10020 CONTINUE
      GOTO 10004
      END
C ---- Long Name Map ----
C printtext                      print0
C printcount                     prinu0
